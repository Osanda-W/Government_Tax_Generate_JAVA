<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<TabPane prefHeight="575.0" prefWidth="850.0" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="org.iit.MainController">
    <Tab text="Import Transactions">
        <VBox spacing="10" style="-fx-padding: 10;">
            <Label alignment="CENTER" contentDisplay="CENTER" prefHeight="60.0" prefWidth="821.0" text="JFXGDTS" textAlignment="CENTER">
                <font>
                    <Font name="Arial Rounded MT Bold" size="36.0" />
                </font>
            </Label>
         <Label text="Select Your CSV for Tax Calculation" />
            <HBox spacing="10">
                <Label text="Transaction File Path:" />
                <TextField fx:id="filePathField" prefWidth="400" />
                <Button onAction="#handleBrowse" style="-fx-background-color: #031cff; -fx-text-fill: #ffffff;" text="Browse..." />
                <Button onAction="#handleImport" style="-fx-background-color: #031cff; -fx-text-fill: #ffffff;" text="Import" />
            </HBox>
            <Label text="Import Status:" />
            <Label fx:id="importStatusLabel" text="No file imported yet." />
        </VBox>
    </Tab>
    <Tab text="View Transactions">
        <VBox spacing="10" style="-fx-padding: 10;">
            <HBox spacing="10">
                <Button onAction="#handleValidate" style="-fx-background-color: #031cff; -fx-text-fill: #ffffff;" text="Validate Transactions" />
                <Button onAction="#handleCalculateProfit" style="-fx-background-color: #031cff; -fx-text-fill: #ffffff;" text="Calculate Profit" />
                <Button onAction="#handleRemoveZeroProfit" style="-fx-background-color: #f70202; -fx-text-fill: #ffffff;" text="Remove Zero Profit" />
            </HBox>
            <Label text="Transaction Summary:" />
            <HBox spacing="20">
                <Label fx:id="totalRecordsLabel" text="Total: 0" />
                <Label fx:id="validRecordsLabel" text="Valid: 0" />
                <Label fx:id="invalidRecordsLabel" text="Invalid: 0" />
            </HBox>
            <StackPane>
                <TableView fx:id="transactionsTable" prefHeight="400">
                    <columns>
                        <TableColumn fx:id="billNumberColumn" text="Bill Number" />
                        <TableColumn fx:id="itemCodeColumn" text="Item Code" />
                        <TableColumn fx:id="internalPriceColumn" text="Internal Price" />
                        <TableColumn fx:id="salePriceColumn" text="Sale Price" />
                        <TableColumn fx:id="quantityColumn" text="Quantity" />
                        <TableColumn fx:id="discountColumn" text="Discount" />
                        <TableColumn fx:id="checksumColumn" text="Checksum" />
                        <TableColumn fx:id="profitColumn" text="Profit" />
                        <TableColumn fx:id="statusColumn" text="Status" />
                    </columns>
                </TableView>

                <!-- Net Profit Summary Label (Overlay at bottom) -->
                <Label fx:id="netProfitSummaryLabel" alignment="CENTER_RIGHT" style="-fx-background-color: rgba(230,230,230,0.8); -fx-padding: 5; -fx-font-weight: bold;" StackPane.alignment="BOTTOM_RIGHT" />
            </StackPane>
            <HBox spacing="10">
                <Button fx:id="editButton" disable="true" onAction="#handleEdit" style="-fx-background-color: #c76f04; -fx-text-fill: #ffffff;" text="Edit Selected" />
                <Button fx:id="deleteButton" disable="true" onAction="#handleDelete" style="-fx-background-color: #f70202; -fx-text-fill: #ffffff;" text="Delete Selected" />
                <Button onAction="#handleSaveToCSV" style="-fx-background-color: #04c735;" text="Save to CSV" />
            </HBox>
        </VBox>
    </Tab>
    <Tab text="Calculate Tax">
        <VBox spacing="10" style="-fx-padding: 10;">
            <Label text="Profit Summary:" />
            <HBox spacing="20">
                <Label fx:id="totalProfitLabel" text="Total Profit: 0" />
                <Label fx:id="totalLossLabel" text="Total Loss: 0" />
                <Label fx:id="netProfitLabel" text="Net Profit: 0" />
            </HBox>
         <Label text="Enter Government  Tax Rate">
            <font>
               <Font name="System Bold" size="11.773585319519043" />
            </font>
         </Label>
            <HBox spacing="10">
                <Label text="Tax Rate (%):" />
                <TextField fx:id="taxRateField" prefWidth="100" />
                <Button onAction="#handleCalculateTax" style="-fx-background-color: #031cff; -fx-text-fill: #ffffff;" text="Calculate Tax" />
            </HBox>
            <Label fx:id="taxResultLabel" style="-fx-font-weight: bold; -fx-font-size: 14;" text="Your Tax will be" />
        </VBox>
    </Tab>
</TabPane>
